{"version":3,"file":"987.demos.bundle.js","mappings":"yMAGA,SAAe,SAA0BA,IAAW,iDAClD,MAAMC,QAAY,wCAIZC,EAAqC,UAF5B,UAEiBC,OAEhC,MAAMC,UAAcH,EAAII,YAAYC,WAAW,QAAS,cAAcC,OAAOH,UAK3EI,SACEC,KAAKC,IAAMD,KAAKE,IAAIC,SAAS,IAAK,KAAM,GAAI,QAAIC,EAAWX,GAE3DO,KAAKK,OAASL,KAAKE,IAAII,WACvBN,KAAKK,OAAOE,UAAU,EAAG,SAAU,GACnCP,KAAKK,OAAOG,WAAW,EAAG,EAAGR,KAAKC,IAAIQ,UAAYT,KAAKC,IAAIS,OAAQV,KAAKC,IAAIU,WAAaX,KAAKC,IAAIW,QAElG,IAAK,IAAIC,EAAI,EAAGA,EAAIb,KAAKC,IAAIa,gBAAiBD,EAC5C,IAAK,IAAIE,EAAI,EAAGA,EAAIf,KAAKC,IAAIe,eAAgBD,EACtCF,GAAME,GAAKF,IAAMb,KAAKC,IAAIa,cAAgB,GAAKC,IAAMf,KAAKC,IAAIe,aAAe,EAGhFhB,KAAKC,IAAIgB,KAAKF,EAAGF,EAAG,CAAC,CAAC,IAAK,UAF3Bb,KAAKC,IAAIgB,KAAKF,EAAGF,EAAG,CAAC,CAAC,IAAK,YAAa,WAO9Cb,KAAKkB,QAAQC,KAAKC,SAASpB,KAAKC,IAAIoB,YAAYN,EAAGf,KAAKC,IAAIoB,YAAYR,GAExEb,KAAKsB,KAAKC,SAAS,CACjBC,MAAM,EACNC,MAAO,IACPC,SAAU,KACR1B,KAAKC,IAAI0B,QAAQ,IAAInC,EAAIoC,KAAK9B,OAAO+B,KAAKC,IAAIC,eAAe,GAAI,IAAK,cACtE/B,KAAKK,OAAO2B,QACZhC,KAAKK,OAAOE,UAAU,EAAG,SAAU,GACnCP,KAAKK,OAAOG,WAAW,EAAG,EAAGR,KAAKC,IAAIQ,UAAYT,KAAKC,IAAIS,OAAQV,KAAKC,IAAIU,WAAaX,KAAKC,IAAIW,QAClGZ,KAAKkB,QAAQC,KAAKC,SAASpB,KAAKC,IAAIoB,YAAYN,EAAGf,KAAKC,IAAIoB,YAAYR,IAE1EoB,cAAejC,OAInBkC,SACE,MAAMC,EAAanC,KAAKoC,MAAMC,cAAcC,iBAAiBtC,KAAKkB,QAAQC,MAGpEoB,EAAevC,KAAKC,IAAIuC,aAAaL,EAAWpB,GAChD0B,EAAezC,KAAKC,IAAIyC,aAAaP,EAAWtB,GAGtDb,KAAKK,OAAOU,EAAIf,KAAKC,IAAI0C,aAAaJ,GACtCvC,KAAKK,OAAOQ,EAAIb,KAAKC,IAAI2C,aAAaH,GAElCzC,KAAKoC,MAAMS,QAAQR,cAAcS,QACnC9C,KAAKC,IAAIgB,KAAKsB,EAAcE,EAAc,CACxC,CAAC3C,OAAO+B,KAAKC,IAAIC,eAAe,GAAI,KAAMjC,OAAOiD,QAAQC,MAAMC,YAAanD,OAAOiD,QAAQC,MAAMC,gBAMxG1D,EAAO2D,MAAyBC,KAAKxD,GAEtC,IAAIG,OAAOsD,KAAK7D","sources":["webpack://@agogpixel/phaser3-glyph-plugin/./demos/glyphmap-3/index.ts"],"sourcesContent":["import { demoHandlerFactory, getParams } from '../shared';\nimport type { Glyphmap } from '../../src';\n\nexport default demoHandlerFactory(async (config) => {\n  const api = await import(/* webpackChunkName: \"phaser-glyph-plugin\" */ '../../src');\n\n  const params = getParams();\n\n  const forceSquareRatio = params.square === 'true' ? true : false;\n\n  class Scene extends api.GlyphPlugin.GlyphScene('glyph', class extends Phaser.Scene {}) {\n    map: Glyphmap;\n\n    marker: Phaser.GameObjects.Graphics;\n\n    create() {\n      this.map = this.add.glyphmap(333, 47.2, 25, 15, undefined, forceSquareRatio);\n\n      this.marker = this.add.graphics();\n      this.marker.lineStyle(2, 0xffff00, 1);\n      this.marker.strokeRect(0, 0, this.map.cellWidth * this.map.scaleX, this.map.cellHeight * this.map.scaleY);\n\n      for (let y = 0; y < this.map.heightInCells; ++y) {\n        for (let x = 0; x < this.map.widthInCells; ++x) {\n          if (!y || !x || y === this.map.heightInCells - 1 || x === this.map.widthInCells - 1) {\n            this.map.draw(x, y, [['#', '#EEEEEEFE', '#4444']]);\n          } else {\n            this.map.draw(x, y, [['.', '#FFF']]);\n          }\n        }\n      }\n\n      this.cameras.main.centerOn(this.map.getCenter().x, this.map.getCenter().y);\n\n      this.time.addEvent({\n        loop: true,\n        delay: 3000,\n        callback: () => {\n          this.map.setFont(new api.Font(Phaser.Math.RND.integerInRange(20, 36), 'monospace'));\n          this.marker.clear();\n          this.marker.lineStyle(2, 0xffff00, 1);\n          this.marker.strokeRect(0, 0, this.map.cellWidth * this.map.scaleX, this.map.cellHeight * this.map.scaleY);\n          this.cameras.main.centerOn(this.map.getCenter().x, this.map.getCenter().y);\n        },\n        callbackScope: this\n      });\n    }\n\n    update() {\n      const worldPoint = this.input.activePointer.positionToCamera(this.cameras.main) as Phaser.Math.Vector2;\n\n      // Rounds down to nearest cell.\n      const pointerCellX = this.map.worldToCellX(worldPoint.x);\n      const pointerCellY = this.map.worldToCellY(worldPoint.y);\n\n      // Snap to cell coordinates, but in world space.\n      this.marker.x = this.map.cellToWorldX(pointerCellX);\n      this.marker.y = this.map.cellToWorldY(pointerCellY);\n\n      if (this.input.manager.activePointer.isDown) {\n        this.map.draw(pointerCellX, pointerCellY, [\n          [Phaser.Math.RND.integerInRange(20, 200), Phaser.Display.Color.RandomRGB(), Phaser.Display.Color.RandomRGB()]\n        ]);\n      }\n    }\n  }\n\n  (config.scene as typeof Scene[]).push(Scene);\n\n  new Phaser.Game(config);\n});\n"],"names":["config","api","forceSquareRatio","square","Scene","GlyphPlugin","GlyphScene","Phaser","create","this","map","add","glyphmap","undefined","marker","graphics","lineStyle","strokeRect","cellWidth","scaleX","cellHeight","scaleY","y","heightInCells","x","widthInCells","draw","cameras","main","centerOn","getCenter","time","addEvent","loop","delay","callback","setFont","Font","Math","RND","integerInRange","clear","callbackScope","update","worldPoint","input","activePointer","positionToCamera","pointerCellX","worldToCellX","pointerCellY","worldToCellY","cellToWorldX","cellToWorldY","manager","isDown","Display","Color","RandomRGB","scene","push","Game"],"sourceRoot":""}