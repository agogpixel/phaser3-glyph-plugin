/*! For license information please see 194.demos.bundle.js.LICENSE.txt */
(self.webpackChunk_agogpixel_phaser3_glyph_plugin=self.webpackChunk_agogpixel_phaser3_glyph_plugin||[]).push([[194],{53012:e=>{e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},73476:(e,t,i)=>{var r=new(i(69186))({initialize:function(e,t,i,r,l,n,a){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===l&&(l=0),void 0===n&&(n=0),this.name=e,this.firstgid=0|t,this.imageWidth=0|i,this.imageHeight=0|r,this.imageMargin=0|l,this.imageSpacing=0|n,this.properties=a||{},this.images=[],this.total=0},containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t){return this.images.push({gid:e,image:t}),this.total++,this}});e.exports=r},64552:(e,t,i)=>{var r=new(i(69186))({initialize:function(e){if(this.gids=[],void 0!==e)for(var t=0;t<e.length;++t)for(var i=e[t],r=0;r<i.total;++r)this.gids[i.firstgid+r]=i;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(e){this.gids=e?this._gids:void 0}},getTypeIncludingTile:function(e){if(void 0!==e.type&&""!==e.type)return e.type;if(this.gids&&void 0!==e.gid){var t=this.gids[e.gid];if(t){var i=t.getTileData(e.gid);if(i)return i.type}}},setTextureAndFrame:function(e,t,i,r){if(null===t&&this.gids&&void 0!==r.gid){var l=this.gids[r.gid];l&&(null===t&&void 0!==l.image&&(t=l.image.key),null===i&&(i=r.gid-l.firstgid),e.scene.textures.getFrame(t,i)||(t=null,i=null))}e.setTexture(t,i)},setPropertiesFromTiledObject:function(e,t){if(void 0!==this.gids&&void 0!==t.gid){var i=this.gids[t.gid];void 0!==i&&this.setFromJSON(e,i.getTileProperties(t.gid))}this.setFromJSON(e,t.properties)},setFromJSON:function(e,t){if(t)if(Array.isArray(t))t.forEach((function(t){e.setData(t.name,t.value)}));else for(var i in t)e.setData(i,t[i])}});e.exports=r},5078:(e,t,i)=>{var r=i(53012),l=i(6691),n=i(37441),a=i(77960);e.exports=function(e,t,i,s,o,h,d,u){void 0===i&&(i=32),void 0===s&&(s=32),void 0===o&&(o=10),void 0===h&&(h=10),void 0===u&&(u=!1);var c=null;if(Array.isArray(d))c=n(void 0!==t?t:"map",r.ARRAY_2D,d,i,s,u);else if(void 0!==t){var f=e.cache.tilemap.get(t);f?c=n(t,f.format,f.data,i,s,u):console.warn("No map data found for key "+t)}return null===c&&(c=new l({tileWidth:i,tileHeight:s,width:o,height:h})),new a(e,c)}},3825:(e,t,i)=>{var r=i(14011),l=i(69186),n=i(19506),a=i(43550),s=new l({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(e,t,i,r,l,n,a,s){this.layer=e,this.index=t,this.x=i,this.y=r,this.width=l,this.height=n,this.right,this.bottom,this.baseWidth=void 0!==a?a:l,this.baseHeight=void 0!==s?s:n,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(e,t){return!(e<this.pixelX||t<this.pixelY||e>this.right||t>this.bottom)},copy:function(e){return this.index=e.index,this.alpha=e.alpha,this.properties=e.properties,this.visible=e.visible,this.setFlip(e.flipX,e.flipY),this.tint=e.tint,this.rotation=e.rotation,this.collideUp=e.collideUp,this.collideDown=e.collideDown,this.collideLeft=e.collideLeft,this.collideRight=e.collideRight,this.collisionCallback=e.collisionCallback,this.collisionCallbackContext=e.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(e){var t=this.tilemapLayer;return t?t.tileToWorldXY(this.x,this.y,void 0,e).x:this.x*this.baseWidth},getRight:function(e){var t=this.tilemapLayer;return t?this.getLeft(e)+this.width*t.scaleX:this.getLeft(e)+this.width},getTop:function(e){var t=this.tilemapLayer;return t?t.tileToWorldY(this.y,e)-(this.height-this.baseHeight)*t.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(e){var t=this.tilemapLayer;return t?this.getTop(e)+this.height*t.scaleY:this.getTop(e)+this.height},getBounds:function(e,t){return void 0===t&&(t=new a),t.x=this.getLeft(e),t.y=this.getTop(e),t.width=this.getRight(e)-t.x,t.height=this.getBottom(e)-t.y,t},getCenterX:function(e){return(this.getLeft(e)+this.getRight(e))/2},getCenterY:function(e){return(this.getTop(e)+this.getBottom(e))/2},intersects:function(e,t,i,r){return!(i<=this.pixelX||r<=this.pixelY||e>=this.right||t>=this.bottom)},isInteresting:function(e,t){return e&&t?this.canCollide||this.hasInterestingFace:e?this.collides:!!t&&this.hasInterestingFace},resetCollision:function(e){return void 0===e&&(e=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,e&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(e,t,i,r,l){return void 0===t&&(t=e),void 0===i&&(i=e),void 0===r&&(r=e),void 0===l&&(l=!0),this.collideLeft=e,this.collideRight=t,this.collideUp=i,this.collideDown=r,this.faceLeft=e,this.faceRight=t,this.faceTop=i,this.faceBottom=r,l&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(e,t){return null===e?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=e,this.collisionCallbackContext=t),this},setSize:function(e,t,i,r){return void 0!==e&&(this.width=e),void 0!==t&&(this.height=t),void 0!==i&&(this.baseWidth=i),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var e=this.layer.orientation;if(e===r.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(e===r.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(e===r.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(e===r.HEXAGONAL){var t=this.layer.hexSideLength,i=(this.baseHeight-t)/2+t;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*i}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var e=this.layer.tilemapLayer;if(e){var t=e.gidMap[this.index];if(t)return t}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var e=this.tilemapLayer;return e?e.tilemap:null}}});e.exports=s},77960:(e,t,i)=>{var r=i(69186),l=i(23407),n=i(53012),a=i(25738),s=i(20814),o=i(64552),h=i(14011),d=i(11747),u=i(28088),c=i(38590),f=i(3825),g=i(32257),p=i(77686),y=i(47270),v=new r({initialize:function(e,t){this.scene=e,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.width=t.width,this.height=t.height,this.orientation=t.orientation,this.renderOrder=t.renderOrder,this.format=t.format,this.version=t.version,this.properties=t.properties,this.widthInPixels=t.widthInPixels,this.heightInPixels=t.heightInPixels,this.imageCollections=t.imageCollections,this.images=t.images,this.layers=t.layers,this.tilesets=t.tilesets,this.objects=t.objects,this.currentLayerIndex=0,this.hexSideLength=t.hexSideLength;var i=this.orientation;this._convert={WorldToTileXY:g.GetWorldToTileXYFunction(i),WorldToTileX:g.GetWorldToTileXFunction(i),WorldToTileY:g.GetWorldToTileYFunction(i),TileToWorldXY:g.GetTileToWorldXYFunction(i),TileToWorldX:g.GetTileToWorldXFunction(i),TileToWorldY:g.GetTileToWorldYFunction(i)}},createBlankDynamicLayer:function(e,t,i,r,l,n,a,s){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(e,t,i,r,l,n,a,s)},createDynamicLayer:function(e,t,i,r){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(e,t,i,r)},createStaticLayer:function(e,t,i,r){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(e,t,i,r)},setRenderOrder:function(e){var t=["right-down","left-down","right-up","left-up"];return"number"==typeof e&&(e=t[e]),t.indexOf(e)>-1&&(this.renderOrder=e),this},addTilesetImage:function(e,t,i,r,l,a,s){if(void 0===e)return null;if(null==t&&(t=e),!this.scene.sys.textures.exists(t))return console.warn("Invalid Tileset Image: "+t),null;var o=this.scene.sys.textures.get(t),h=this.getTilesetIndex(e);if(null===h&&this.format===n.TILED_JSON)return console.warn("No data found for Tileset: "+e),null;var d=this.tilesets[h];return d?(d.setTileSize(i,r),d.setSpacing(l,a),d.setImage(o),d):(void 0===i&&(i=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===l&&(l=0),void 0===a&&(a=0),void 0===s&&(s=0),(d=new y(e,s,i,r,l,a)).setImage(o),this.tilesets.push(d),d)},copy:function(e,t,i,r,l,n,a,s){return null!==(s=this.getLayer(s))?(g.Copy(e,t,i,r,l,n,a,s),this):null},createBlankLayer:function(e,t,i,r,l,n,a,o){if(void 0===i&&(i=0),void 0===r&&(r=0),void 0===l&&(l=this.width),void 0===n&&(n=this.height),void 0===a&&(a=this.tileWidth),void 0===o&&(o=this.tileHeight),null!==this.getLayerIndex(e))return console.warn("Invalid Tilemap Layer ID: "+e),null;for(var h,d=new s({name:e,tileWidth:a,tileHeight:o,width:l,height:n,orientation:this.orientation}),u=0;u<n;u++){h=[];for(var c=0;c<l;c++)h.push(new f(d,-1,c,u,a,o,this.tileWidth,this.tileHeight));d.data.push(h)}this.layers.push(d),this.currentLayerIndex=this.layers.length-1;var g=new p(this.scene,this,this.currentLayerIndex,t,i,r);return g.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(g),g},createLayer:function(e,t,i,r){var l=this.getLayerIndex(e);if(null===l)return console.warn("Invalid Tilemap Layer ID: "+e),"string"==typeof e&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var n=this.layers[l];if(n.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+e),null;this.currentLayerIndex=l,void 0===i&&(i=n.x),void 0===r&&(r=n.y);var a=new p(this.scene,this,l,t,i,r);return a.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(a),a},createFromObjects:function(e,t,i){void 0===i&&(i=!0);var r=[],n=this.getObjectLayer(e);if(!n)return console.warn("createFromObjects: Invalid objectLayerName given: "+e),r;var s=new o(i?this.tilesets:void 0);Array.isArray(t)||(t=[t]);for(var u=n.objects,f=0;f<t.length;f++){var g,p=t[f],y=a(p,"id",null),v=a(p,"gid",null),x=a(p,"name",null),m=a(p,"type",null);s.enabled=!a(p,"ignoreTileset",null);for(var T=[],w=0;w<u.length;w++)g=u[w],(null===y&&null===v&&null===x&&null===m||null!==y&&g.id===y||null!==v&&g.gid===v||null!==x&&g.name===x||null!==m&&s.getTypeIncludingTile(g)===m)&&T.push(g);for(var L=a(p,"classType",c),b=a(p,"scene",this.scene),W=a(p,"container",null),A=a(p,"key",null),Y=a(p,"frame",null),C=0;C<T.length;C++){g=T[C];var I=new L(b);if(I.setName(g.name),I.setPosition(g.x,g.y),s.setTextureAndFrame(I,A,Y,g),g.width&&(I.displayWidth=g.width),g.height&&(I.displayHeight=g.height),this.orientation===h.ISOMETRIC){var X=this.tileWidth/this.tileHeight,O={x:I.x-I.y,y:(I.x+I.y)/X};I.x=O.x,I.y=O.y}var S={x:I.originX*g.width,y:(I.originY-(g.gid?1:0))*g.height};if(g.rotation){var H=l(g.rotation);d(S,H),I.rotation=H}I.x+=S.x,I.y+=S.y,void 0===g.flippedHorizontal&&void 0===g.flippedVertical||I.setFlip(g.flippedHorizontal,g.flippedVertical),g.visible||(I.visible=!1),s.setPropertiesFromTiledObject(I,g),W?W.add(I):b.add.existing(I),r.push(I)}}return r},createFromTiles:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:g.CreateFromTiles(e,t,i,r,l,n)},fill:function(e,t,i,r,l,n,a){return void 0===n&&(n=!0),null===(a=this.getLayer(a))?null:(g.Fill(e,t,i,r,l,n,a),this)},filterObjects:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.filter(t,i)},filterTiles:function(e,t,i,r,l,n,a,s){return null===(s=this.getLayer(s))?null:g.FilterTiles(e,t,i,r,l,n,a,s)},findByIndex:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.FindByIndex(e,t,i,r)},findObject:function(e,t,i){if("string"==typeof e){var r=e;if(!(e=this.getObjectLayer(e)))return console.warn("No object layer found with the name: "+r),null}return e.objects.find(t,i)||null},findTile:function(e,t,i,r,l,n,a,s){return null===(s=this.getLayer(s))?null:g.FindTile(e,t,i,r,l,n,a,s)},forEachTile:function(e,t,i,r,l,n,a,s){return null===(s=this.getLayer(s))?null:(g.ForEachTile(e,t,i,r,l,n,a,s),this)},getImageIndex:function(e){return this.getIndex(this.images,e)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(e){return e.name})):[]},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayer:function(e){var t=this.getLayerIndex(e);return null!==t?this.layers[t]:null},getObjectLayer:function(e){var t=this.getIndex(this.objects,e);return null!==t?this.objects[t]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(e){return e.name})):[]},getLayerIndex:function(e){return void 0===e?this.currentLayerIndex:"string"==typeof e?this.getLayerIndexByName(e):"number"==typeof e&&e<this.layers.length?e:e instanceof p?e.layerIndex:null},getLayerIndexByName:function(e){return this.getIndex(this.layers,e)},getTileAt:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.GetTileAt(e,t,i,r)},getTileAtWorldXY:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:g.GetTileAtWorldXY(e,t,i,r,l)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(e){return e.name})):[]},getTilesWithin:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:g.GetTilesWithin(e,t,i,r,l,n)},getTilesWithinShape:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.GetTilesWithinShape(e,t,i,r)},getTilesWithinWorldXY:function(e,t,i,r,l,n,a){return null===(a=this.getLayer(a))?null:g.GetTilesWithinWorldXY(e,t,i,r,l,n,a)},getTileset:function(e){var t=this.getIndex(this.tilesets,e);return null!==t?this.tilesets[t]:null},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},hasTileAt:function(e,t,i){return null===(i=this.getLayer(i))?null:g.HasTileAt(e,t,i)},hasTileAtWorldXY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:g.HasTileAtWorldXY(e,t,i,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(e){this.setLayer(e)}},putTileAt:function(e,t,i,r,l){return void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:g.PutTileAt(e,t,i,r,l)},putTileAtWorldXY:function(e,t,i,r,l,n){return void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:g.PutTileAtWorldXY(e,t,i,r,l,n)},putTilesAt:function(e,t,i,r,l){return void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:(g.PutTilesAt(e,t,i,r,l),this)},randomize:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:(g.Randomize(e,t,i,r,l,n),this)},calculateFacesAt:function(e,t,i){return null===(i=this.getLayer(i))?null:(g.CalculateFacesAt(e,t,i),this)},calculateFacesWithin:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:(g.CalculateFacesWithin(e,t,i,r,l),this)},removeLayer:function(e){var t=this.getLayerIndex(e);if(null!==t){u(this.layers,t);for(var i=t;i<this.layers.length;i++)this.layers[i].tilemapLayer&&this.layers[i].tilemapLayer.layerIndex--;return this.currentLayerIndex===t&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(e){var t=this.getLayerIndex(e);return null!==t?((e=this.layers[t]).destroy(),u(this.layers,t),this.currentLayerIndex===t&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var e=this.layers,t=0;t<e.length;t++)e[t].tilemapLayer&&e[t].tilemapLayer.destroy(!1);return e.length=0,this.currentLayerIndex=0,this},removeTile:function(e,t,i){void 0===t&&(t=-1),void 0===i&&(i=!0);var r=[];Array.isArray(e)||(e=[e]);for(var l=0;l<e.length;l++){var n=e[l];r.push(this.removeTileAt(n.x,n.y,!0,i,n.tilemapLayer)),t>-1&&this.putTileAt(t,n.x,n.y,i,n.tilemapLayer)}return r},removeTileAt:function(e,t,i,r,l){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:g.RemoveTileAt(e,t,i,r,l)},removeTileAtWorldXY:function(e,t,i,r,l,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(n=this.getLayer(n))?null:g.RemoveTileAtWorldXY(e,t,i,r,l,n)},renderDebug:function(e,t,i){return null===(i=this.getLayer(i))?null:(this.orientation===h.ORTHOGONAL&&g.RenderDebug(e,t,i),this)},renderDebugFull:function(e,t){for(var i=this.layers,r=0;r<i.length;r++)g.RenderDebug(e,t,i[r]);return this},replaceByIndex:function(e,t,i,r,l,n,a){return null===(a=this.getLayer(a))?null:(g.ReplaceByIndex(e,t,i,r,l,n,a),this)},setCollision:function(e,t,i,r,l){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===l&&(l=!0),null===(r=this.getLayer(r))?null:(g.SetCollision(e,t,i,r,l),this)},setCollisionBetween:function(e,t,i,r,l){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(l=this.getLayer(l))?null:(g.SetCollisionBetween(e,t,i,r,l),this)},setCollisionByProperty:function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(g.SetCollisionByProperty(e,t,i,r),this)},setCollisionByExclusion:function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(g.SetCollisionByExclusion(e,t,i,r),this)},setCollisionFromCollisionGroup:function(e,t,i){return void 0===e&&(e=!0),void 0===t&&(t=!0),null===(i=this.getLayer(i))?null:(g.SetCollisionFromCollisionGroup(e,t,i),this)},setTileIndexCallback:function(e,t,i,r){return null===(r=this.getLayer(r))?null:(g.SetTileIndexCallback(e,t,i,r),this)},setTileLocationCallback:function(e,t,i,r,l,n,a){return null===(a=this.getLayer(a))?null:(g.SetTileLocationCallback(e,t,i,r,l,n,a),this)},setLayer:function(e){var t=this.getLayerIndex(e);return null!==t&&(this.currentLayerIndex=t),this},setBaseTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t;for(var i=0;i<this.layers.length;i++){this.layers[i].baseTileWidth=e,this.layers[i].baseTileHeight=t;for(var r=this.layers[i].data,l=this.layers[i].width,n=this.layers[i].height,a=0;a<n;a++)for(var s=0;s<l;s++){var o=r[a][s];null!==o&&o.setSize(void 0,void 0,e,t)}}return this},setLayerTileSize:function(e,t,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=e,i.tileHeight=t;for(var r=i.data,l=i.width,n=i.height,a=0;a<n;a++)for(var s=0;s<l;s++){var o=r[a][s];null!==o&&o.setSize(e,t)}return this},shuffle:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:(g.Shuffle(e,t,i,r,l),this)},swapByIndex:function(e,t,i,r,l,n,a){return null===(a=this.getLayer(a))?null:(g.SwapByIndex(e,t,i,r,l,n,a),this)},tileToWorldX:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldX(e,t,i)},tileToWorldY:function(e,t,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldY(e,t,i)},tileToWorldXY:function(e,t,i,r,l){return null===(l=this.getLayer(l))?null:this._convert.TileToWorldXY(e,t,i,r,l)},weightedRandomize:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:(g.WeightedRandomize(t,i,r,l,e,n),this)},worldToTileX:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(e,t,i,r)},worldToTileY:function(e,t,i,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(e,t,i,r)},worldToTileXY:function(e,t,i,r,l,n){return null===(n=this.getLayer(n))?null:this._convert.WorldToTileXY(e,t,i,r,l,n)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=v},11328:(e,t,i)=>{var r=i(78757),l=i(5078);r.register("tilemap",(function(e){var t=void 0!==e?e:{};return l(this.scene,t.key,t.tileWidth,t.tileHeight,t.width,t.height,t.data,t.insertNull)}))},81004:(e,t,i)=>{var r=i(66642),l=i(5078);r.register("tilemap",(function(e,t,i,r,n,a,s){return null===e&&(e=void 0),null===t&&(t=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===n&&(n=void 0),l(this.scene,e,t,i,r,n,a,s)}))},77686:(e,t,i)=>{var r=i(69186),l=i(19506),n=i(38236),a=i(32257),s=i(56996),o=new r({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Depth,l.Flip,l.GetBounds,l.Origin,l.Pipeline,l.Transform,l.Visible,l.ScrollFactor,s],initialize:function(e,t,i,r,l,s){n.call(this,e,"TilemapLayer"),this.isTilemap=!0,this.tilemap=t,this.layerIndex=i,this.layer=t.layers[i],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(l,s),this.setOrigin(),this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(e){var t=[],i=[],r=this.tilemap;Array.isArray(e)||(e=[e]);for(var l=0;l<e.length;l++){var n=e[l];if("string"==typeof n&&(n=r.getTileset(n)),n){i.push(n);for(var a=n.firstgid,s=0;s<n.total;s++)t[a+s]=n}}this.gidMap=t,this.tileset=i},setRenderOrder:function(e){return"string"==typeof e&&(e=["right-down","left-down","right-up","left-up"].indexOf(e)),e>=0&&e<4&&(this._renderOrder=e),this},calculateFacesAt:function(e,t){return a.CalculateFacesAt(e,t,this.layer),this},calculateFacesWithin:function(e,t,i,r){return a.CalculateFacesWithin(e,t,i,r,this.layer),this},createFromTiles:function(e,t,i,r,l){return a.CreateFromTiles(e,t,i,r,l,this.layer)},cull:function(e){return this.cullCallback(this.layer,e,this.culledTiles,this._renderOrder)},copy:function(e,t,i,r,l,n,s){return a.Copy(e,t,i,r,l,n,s,this.layer),this},fill:function(e,t,i,r,l,n){return a.Fill(e,t,i,r,l,n,this.layer),this},filterTiles:function(e,t,i,r,l,n,s){return a.FilterTiles(e,t,i,r,l,n,s,this.layer)},findByIndex:function(e,t,i){return a.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,l,n,s){return a.FindTile(e,t,i,r,l,n,s,this.layer)},forEachTile:function(e,t,i,r,l,n,s){return a.ForEachTile(e,t,i,r,l,n,s,this.layer),this},getTileAt:function(e,t,i){return a.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return a.GetTileAtWorldXY(e,t,i,r,this.layer)},getTilesWithin:function(e,t,i,r,l){return a.GetTilesWithin(e,t,i,r,l,this.layer)},getTilesWithinShape:function(e,t,i){return a.GetTilesWithinShape(e,t,i,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,l,n){return a.GetTilesWithinWorldXY(e,t,i,r,l,n,this.layer)},hasTileAt:function(e,t){return a.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return a.HasTileAtWorldXY(e,t,i,this.layer)},putTileAt:function(e,t,i,r){return a.PutTileAt(e,t,i,r,this.layer)},putTileAtWorldXY:function(e,t,i,r,l){return a.PutTileAtWorldXY(e,t,i,r,l,this.layer)},putTilesAt:function(e,t,i,r){return a.PutTilesAt(e,t,i,r,this.layer),this},randomize:function(e,t,i,r,l){return a.Randomize(e,t,i,r,l,this.layer),this},removeTileAt:function(e,t,i,r){return a.RemoveTileAt(e,t,i,r,this.layer)},removeTileAtWorldXY:function(e,t,i,r,l){return a.RemoveTileAtWorldXY(e,t,i,r,l,this.layer)},renderDebug:function(e,t){return a.RenderDebug(e,t,this.layer),this},replaceByIndex:function(e,t,i,r,l,n){return a.ReplaceByIndex(e,t,i,r,l,n,this.layer),this},setSkipCull:function(e){return void 0===e&&(e=!0),this.skipCull=e,this},setCullPadding:function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1),this.cullPaddingX=e,this.cullPaddingY=t,this},setCollision:function(e,t,i,r){return a.SetCollision(e,t,i,this.layer,r),this},setCollisionBetween:function(e,t,i,r){return a.SetCollisionBetween(e,t,i,r,this.layer),this},setCollisionByProperty:function(e,t,i){return a.SetCollisionByProperty(e,t,i,this.layer),this},setCollisionByExclusion:function(e,t,i){return a.SetCollisionByExclusion(e,t,i,this.layer),this},setCollisionFromCollisionGroup:function(e,t){return a.SetCollisionFromCollisionGroup(e,t,this.layer),this},setTileIndexCallback:function(e,t,i){return a.SetTileIndexCallback(e,t,i,this.layer),this},setTileLocationCallback:function(e,t,i,r,l,n){return a.SetTileLocationCallback(e,t,i,r,l,n,this.layer),this},shuffle:function(e,t,i,r){return a.Shuffle(e,t,i,r,this.layer),this},swapByIndex:function(e,t,i,r,l,n){return a.SwapByIndex(e,t,i,r,l,n,this.layer),this},tileToWorldX:function(e,t){return this.tilemap.tileToWorldX(e,t,this)},tileToWorldY:function(e,t){return this.tilemap.tileToWorldY(e,t,this)},tileToWorldXY:function(e,t,i,r){return this.tilemap.tileToWorldXY(e,t,i,r,this)},weightedRandomize:function(e,t,i,r,l){return a.WeightedRandomize(t,i,r,l,e,this.layer),this},worldToTileX:function(e,t,i){return this.tilemap.worldToTileX(e,t,i,this)},worldToTileY:function(e,t,i){return this.tilemap.worldToTileY(e,t,i,this)},worldToTileXY:function(e,t,i,r,l){return this.tilemap.worldToTileXY(e,t,i,r,l,this)},destroy:function(e){void 0===e&&(e=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),e&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],n.prototype.destroy.call(this))}});e.exports=o},19814:(e,t,i)=>{var r=i(9329),l=new r,n=new r,a=new r;e.exports=function(e,t,i,r){var s=t.cull(i),o=s.length,h=i.alpha*t.alpha;if(!(0===o||h<=0)){var d=l,u=n,c=a;u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),d.copyFrom(i.matrix);var f=e.currentContext,g=t.gidMap;f.save(),r?(d.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),u.e=t.x,u.f=t.y,d.multiply(u,c),c.copyToContext(f)):(u.e-=i.scrollX*t.scrollFactorX,u.f-=i.scrollY*t.scrollFactorY,u.copyToContext(f)),(!e.antialias||t.scaleX>1||t.scaleY>1)&&(f.imageSmoothingEnabled=!1);for(var p=0;p<o;p++){var y=s[p],v=g[y.index];if(v){var x=v.image.getSourceImage(),m=v.getTileTextureCoordinates(y.index);if(null!==m){var T=v.tileWidth,w=v.tileHeight,L=.5*T,b=.5*w;m.x+=v.tileOffset.x,m.y+=v.tileOffset.y,f.save(),f.translate(y.pixelX+L,y.pixelY+b),0!==y.rotation&&f.rotate(y.rotation),(y.flipX||y.flipY)&&f.scale(y.flipX?-1:1,y.flipY?-1:1),f.globalAlpha=h*y.alpha,f.drawImage(x,m.x,m.y,T,w,-L,-b,T,w),f.restore()}}}f.restore()}}},56996:(e,t,i)=>{var r=i(45733),l=i(45733);r=i(30744),l=i(19814),e.exports={renderWebGL:r,renderCanvas:l}},30744:(e,t,i)=>{var r=i(64564);e.exports=function(e,t,i){var l=t.cull(i),n=l.length,a=i.alpha*t.alpha;if(!(0===n||a<=0)){var s=t.gidMap,o=e.pipelines.set(t.pipeline,t),h=r.getTintAppendFloatAlpha,d=t.scrollFactorX,u=t.scrollFactorY,c=t.x,f=t.y,g=t.scaleX,p=t.scaleY;e.pipelines.preBatch(t);for(var y=0;y<n;y++){var v=l[y],x=s[v.index];if(x){var m=x.getTileTextureCoordinates(v.index);if(null!==m){var T=x.glTexture,w=o.setTexture2D(T,t),L=x.tileWidth,b=x.tileHeight,W=m.x,A=m.y,Y=.5*x.tileWidth,C=.5*x.tileHeight,I=x.tileOffset.x,X=x.tileOffset.y,O=h(v.tint,a*v.alpha);o.batchTexture(t,T,T.width,T.height,c+v.pixelX*g+(Y*g-I),f+v.pixelY*p+(C*p-X),v.width,v.height,g,p,v.rotation,v.flipX,v.flipY,d,u,Y,C,W,A,L,b,O,O,O,O,!1,0,0,i,null,!0,w)}}}e.pipelines.postBatch(t)}}},47270:(e,t,i)=>{var r=i(69186),l=i(17321),n=new r({initialize:function(e,t,i,r,n,a,s,o,h){(void 0===i||i<=0)&&(i=32),(void 0===r||r<=0)&&(r=32),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s={}),void 0===o&&(o={}),this.name=e,this.firstgid=t,this.tileWidth=i,this.tileHeight=r,this.tileMargin=n,this.tileSpacing=a,this.tileProperties=s,this.tileData=o,this.tileOffset=new l,void 0!==h&&this.tileOffset.set(h.x,h.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(e){return this.containsTileIndex(e)?this.tileProperties[e-this.firstgid]:null},getTileData:function(e){return this.containsTileIndex(e)?this.tileData[e-this.firstgid]:null},getTileCollisionGroup:function(e){var t=this.getTileData(e);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},getTileTextureCoordinates:function(e){return this.containsTileIndex(e)?this.texCoordinates[e-this.firstgid]:null},setImage:function(e){return this.image=e,this.glTexture=e.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(e,t){return void 0!==e&&(this.tileWidth=e),void 0!==t&&(this.tileHeight=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(e,t){return void 0!==e&&(this.tileMargin=e),void 0!==t&&(this.tileSpacing=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(e,t){var i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i%1==0&&r%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),r=Math.floor(r),this.rows=i,this.columns=r,this.total=i*r,this.texCoordinates.length=0;for(var l=this.tileMargin,n=this.tileMargin,a=0;a<this.rows;a++){for(var s=0;s<this.columns;s++)this.texCoordinates.push({x:l,y:n}),l+=this.tileWidth+this.tileSpacing;l=this.tileMargin,n+=this.tileHeight+this.tileSpacing}return this}});e.exports=n},500:(e,t,i)=>{var r=i(15921);e.exports=function(e,t,i){var l=r(e,t,!0,i),n=r(e,t-1,!0,i),a=r(e,t+1,!0,i),s=r(e-1,t,!0,i),o=r(e+1,t,!0,i),h=l&&l.collides;return h&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),n&&n.collides&&(h&&(l.faceTop=!1),n.faceBottom=!h),a&&a.collides&&(h&&(l.faceBottom=!1),a.faceTop=!h),s&&s.collides&&(h&&(l.faceLeft=!1),s.faceRight=!h),o&&o.collides&&(h&&(l.faceRight=!1),o.faceLeft=!h),l&&!l.collides&&l.resetFaces(),l}},22122:(e,t,i)=>{var r=i(15921),l=i(98767);e.exports=function(e,t,i,n,a){for(var s=null,o=null,h=null,d=null,u=l(e,t,i,n,null,a),c=0;c<u.length;c++){var f=u[c];f&&(f.collides?(s=r(f.x,f.y-1,!0,a),o=r(f.x,f.y+1,!0,a),h=r(f.x-1,f.y,!0,a),d=r(f.x+1,f.y,!0,a),f.faceTop=!s||!s.collides,f.faceBottom=!o||!o.collides,f.faceLeft=!h||!h.collides,f.faceRight=!d||!d.collides):f.resetFaces())}}},32615:(e,t,i)=>{var r=new(i(17321));e.exports=function(e,t,i,l){var n=i.tilemapLayer,a=n.cullPaddingX,s=n.cullPaddingY,o=n.tilemap.tileToWorldXY(e,t,r,l,n);return o.x>l.worldView.x+n.scaleX*i.tileWidth*(-a-.5)&&o.x<l.worldView.right+n.scaleX*i.tileWidth*(a-.5)&&o.y>l.worldView.y+n.scaleY*i.tileHeight*(-s-1)&&o.y<l.worldView.bottom+n.scaleY*i.tileHeight*(s-.5)}},35432:(e,t,i)=>{var r=i(98767),l=i(22122);e.exports=function(e,t,i,n,a,s,o,h){void 0===o&&(o=!0),e<0&&(e=0),t<0&&(t=0);for(var d=r(e,t,i,n,null,h),u=a-e,c=s-t,f=0;f<d.length;f++){var g=d[f].x+u,p=d[f].y+c;g>=0&&g<h.width&&p>=0&&p<h.height&&h.data[p][g]&&h.data[p][g].copy(d[f])}o&&l(a-1,s-1,i+2,n+2,h)}},94916:(e,t,i)=>{var r=i(98767),l=i(44641);e.exports=function(e,t,i,n,a,s){i||(i={}),Array.isArray(e)||(e=[e]);var o=s.tilemapLayer;n||(n=o.scene),a||(a=n.cameras.main);var h,d=r(0,0,s.width,s.height,null,s),u=[];for(h=0;h<d.length;h++){var c=d[h];if(-1!==e.indexOf(c.index)){var f=o.tileToWorldXY(c.x,c.y,void 0,a,s);i.x=f.x,i.y=f.y,u.push(n.make.sprite(i))}}if("number"==typeof t)for(h=0;h<e.length;h++)l(e[h],t,0,0,s.width,s.height,s);else if(Array.isArray(t))for(h=0;h<e.length;h++)l(e[h],t[h],0,0,s.width,s.height,s);return u}},65234:(e,t,i)=>{var r=i(75380),l=i(12174),n=i(99e3),a=new r;e.exports=function(e,t){var i=e.tilemapLayer.tilemap,r=e.tilemapLayer,s=Math.floor(i.tileWidth*r.scaleX),o=Math.floor(i.tileHeight*r.scaleY),h=n(t.worldView.x-r.x,s,0,!0)-r.cullPaddingX,d=l(t.worldView.right-r.x,s,0,!0)+r.cullPaddingX,u=n(t.worldView.y-r.y,o,0,!0)-r.cullPaddingY,c=l(t.worldView.bottom-r.y,o,0,!0)+r.cullPaddingY;return a.setTo(h,u,d-h,c-u)}},65479:(e,t,i)=>{var r=i(65234),l=i(55645);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var a=e.tilemapLayer,s=r(e,t);return(a.skipCull||1!==a.scrollFactorX||1!==a.scrollFactorY)&&(s.left=0,s.right=e.width,s.top=0,s.bottom=e.height),l(e,s,n,i),i}},22619:(e,t,i)=>{var r=i(98767),l=i(22122),n=i(35031);e.exports=function(e,t,i,a,s,o,h){for(var d=-1!==h.collideIndexes.indexOf(e),u=r(t,i,a,s,null,h),c=0;c<u.length;c++)u[c].index=e,n(u[c],d);o&&l(t-1,i-1,a+2,s+2,h)}},34254:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,a,s,o){return r(i,l,n,a,s,o).filter(e,t)}},71198:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=0),void 0===i&&(i=!1);var l,n,a,s=0;if(i){for(n=r.height-1;n>=0;n--)for(l=r.width-1;l>=0;l--)if((a=r.data[n][l])&&a.index===e){if(s===t)return a;s+=1}}else for(n=0;n<r.height;n++)for(l=0;l<r.width;l++)if((a=r.data[n][l])&&a.index===e){if(s===t)return a;s+=1}return null}},87555:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,a,s,o){return r(i,l,n,a,s,o).find(e,t)||null}},30127:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,a,s,o){r(i,l,n,a,s,o).forEach(e,t)}},69447:(e,t,i)=>{var r=i(14011),l=i(65479),n=i(5802),a=i(14879),s=i(45733),o=i(46341);e.exports=function(e){return e===r.ORTHOGONAL?l:e===r.HEXAGONAL?n:e===r.STAGGERED?o:e===r.ISOMETRIC?a:s}},15921:(e,t,i)=>{var r=i(48339);e.exports=function(e,t,i,l){if(void 0===i&&(i=!1),r(e,t,l)){var n=l.data[t][e]||null;return n?-1===n.index?i?n:null:n:null}return null}},16304:(e,t,i)=>{var r=i(15921),l=new(i(17321));e.exports=function(e,t,i,n,a){return a.tilemapLayer.worldToTileXY(e,t,!0,l,n),r(l.x,l.y,i,a)}},10858:(e,t,i)=>{var r=i(14011),l=i(45733),n=i(80391);e.exports=function(e){return e===r.ORTHOGONAL?n:l}},59363:(e,t,i)=>{var r=i(14011),l=i(56645),n=i(19462),a=i(45733),s=i(16407),o=i(29938);e.exports=function(e){return e===r.ORTHOGONAL?o:e===r.ISOMETRIC?n:e===r.HEXAGONAL?l:e===r.STAGGERED?s:a}},83277:(e,t,i)=>{var r=i(14011),l=i(96542),n=i(45733),a=i(89485),s=i(56775);e.exports=function(e){return e===r.ORTHOGONAL?s:e===r.HEXAGONAL?l:e===r.STAGGERED?a:n}},98767:(e,t,i)=>{var r=i(25738);e.exports=function(e,t,i,l,n,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=a.width),void 0===l&&(l=a.height),n||(n={});var s=r(n,"isNotEmpty",!1),o=r(n,"isColliding",!1),h=r(n,"hasInterestingFace",!1);e<0&&(i+=e,e=0),t<0&&(l+=t,t=0),e+i>a.width&&(i=Math.max(a.width-e,0)),t+l>a.height&&(l=Math.max(a.height-t,0));for(var d=[],u=t;u<t+l;u++)for(var c=e;c<e+i;c++){var f=a.data[u][c];if(null!==f){if(s&&-1===f.index)continue;if(o&&!f.collides)continue;if(h&&!f.hasInterestingFace)continue;d.push(f)}}return d}},13091:(e,t,i)=>{var r=i(67449),l=i(98767),n=i(33408),a=i(45733),s=i(17321),o=function(e,t){return n.RectangleToTriangle(t,e)},h=new s,d=new s,u=new s;e.exports=function(e,t,i,s){if(void 0===e)return[];var c=a;e instanceof r.Circle?c=n.CircleToRectangle:e instanceof r.Rectangle?c=n.RectangleToRectangle:e instanceof r.Triangle?c=o:e instanceof r.Line&&(c=n.LineToRectangle),s.tilemapLayer.worldToTileXY(e.left,e.top,!0,d,i);var f=d.x,g=d.y;s.tilemapLayer.worldToTileXY(e.right,e.bottom,!0,u,i);var p=Math.ceil(u.x),y=Math.ceil(u.y),v=Math.max(p-f,1),x=Math.max(y-g,1),m=l(f,g,v,x,t,s),T=s.tileWidth,w=s.tileHeight;s.tilemapLayer&&(T*=s.tilemapLayer.scaleX,w*=s.tilemapLayer.scaleY);for(var L=[],b=new r.Rectangle(0,0,T,w),W=0;W<m.length;W++){var A=m[W];s.tilemapLayer.tileToWorldXY(A.x,A.y,h,i),b.x=h.x,b.y=h.y,c(e,b)&&L.push(A)}return L}},79247:(e,t,i)=>{var r=i(98767),l=i(17321),n=new l,a=new l;e.exports=function(e,t,i,l,s,o,h){var d=h.tilemapLayer.tilemap._convert.WorldToTileXY;d(e,t,!0,n,o,h);var u=n.x,c=n.y;d(e+i,t+l,!1,a,o,h);var f=Math.ceil(a.x),g=Math.ceil(a.y);return r(u,c,f-u,g-c,s,h)}},54343:(e,t,i)=>{var r=i(14011),l=i(45733),n=i(78899);e.exports=function(e){return e===r.ORTHOGONAL?n:l}},53813:(e,t,i)=>{var r=i(14011),l=i(1917),n=i(25901),a=i(45733),s=i(89098),o=i(99916);e.exports=function(e){return e===r.ORTHOGONAL?o:e===r.ISOMETRIC?n:e===r.HEXAGONAL?l:e===r.STAGGERED?s:a}},30833:(e,t,i)=>{var r=i(14011),l=i(89055),n=i(45733),a=i(95608),s=i(87472);e.exports=function(e){return e===r.ORTHOGONAL?s:e===r.HEXAGONAL?l:e===r.STAGGERED?a:n}},5253:(e,t,i)=>{var r=i(48339);e.exports=function(e,t,i){if(r(e,t,i)){var l=i.data[t][e];return null!==l&&l.index>-1}return!1}},72502:(e,t,i)=>{var r=i(5253),l=new(i(17321));e.exports=function(e,t,i,n){n.tilemapLayer.worldToTileXY(e,t,!0,l,i);var a=l.x,s=l.y;return r(a,s,n)}},96921:(e,t,i)=>{var r=i(12174),l=i(99e3);e.exports=function(e,t){var i=e.tilemapLayer.tilemap,n=e.tilemapLayer,a=Math.floor(i.tileWidth*n.scaleX),s=Math.floor(i.tileHeight*n.scaleY),o=e.hexSideLength,h=(s-o)/2+o;return{left:l(t.worldView.x-n.x,a,0,!0)-n.cullPaddingX,right:r(t.worldView.right-n.x,a,0,!0)+n.cullPaddingX,top:l(t.worldView.y-n.y,h,0,!0)-n.cullPaddingY,bottom:r(t.worldView.bottom-n.y,h,0,!0)+n.cullPaddingY}}},5802:(e,t,i)=>{var r=i(96921),l=i(55645);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var a=e.tilemapLayer;if(!a.skipCull&&1===a.scrollFactorX&&1===a.scrollFactorY){var s=r(e,t);l(e,s,n,i)}return i}},56645:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n){i||(i=new r);var a=n.baseTileWidth,s=n.baseTileHeight,o=n.tilemapLayer,h=0,d=0;o&&(l||(l=o.scene.cameras.main),h=o.x+l.scrollX*(1-o.scrollFactorX),a*=o.scaleX,d=o.y+l.scrollY*(1-o.scrollFactorY),s*=o.scaleY);var u=n.hexSideLength,c=h+e*a+t%2*(a/2),f=d+t*((s-u)/2+u);return i.set(c,f)}},96542:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,l=i.tilemapLayer,n=0;l&&(void 0===t&&(t=l.scene.cameras.main),n=l.y+t.scrollY*(1-l.scrollFactorY),r*=l.scaleY);var a=l.tilemap.hexSideLength;return n+e*((r-a)/2+a)}},1917:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n,a){l||(l=new r);var s=a.baseTileWidth,o=a.baseTileHeight,h=a.tilemapLayer;h&&(n||(n=h.scene.cameras.main),t-=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY,e-=h.x+n.scrollX*(1-h.scrollFactorX),s*=h.scaleX);var d=a.hexSideLength,u=(o-d)/2+d,c=i?Math.floor(t/u):t/u,f=i?Math.floor((e-c%2*.5*s)/s):(e-c%2*.5*s)/s;return l.set(f,c)}},89055:e=>{e.exports=function(e,t,i,r){var l=r.baseTileHeight,n=r.tilemapLayer;n&&(i||(i=n.scene.cameras.main),e-=n.y+i.scrollY*(1-n.scrollFactorY),l*=n.scaleY);var a=r.hexSideLength,s=(l-a)/2+a;return t?Math.floor(e/s):e/s}},48339:e=>{e.exports=function(e,t,i){return e>=0&&e<i.width&&t>=0&&t<i.height}},14879:(e,t,i)=>{var r=i(32615);e.exports=function(e,t,i,l){void 0===i&&(i=[]),void 0===l&&(l=0),i.length=0;var n,a,s,o=e.tilemapLayer,h=e.data,d=e.width,u=e.height,c=d,f=u;if(!o.skipCull)if(0===l){for(a=0;a<f;a++)for(n=0;h[a]&&n<c;n++)if(r(n,a,e,t)){if(!(s=h[a][n])||-1===s.index||!s.visible||0===s.alpha)continue;i.push(s)}}else if(1===l){for(a=0;a<f;a++)for(n=c;h[a]&&n>=0;n--)if(r(n,a,e,t)){if(!(s=h[a][n])||-1===s.index||!s.visible||0===s.alpha)continue;i.push(s)}}else if(2===l){for(a=f;a>=0;a--)for(n=0;h[a]&&n<c;n++)if(r(n,a,e,t)){if(!(s=h[a][n])||-1===s.index||!s.visible||0===s.alpha)continue;i.push(s)}}else if(3===l)for(a=f;a>=0;a--)for(n=c;h[a]&&n>=0;n--)if(r(n,a,e,t)){if(!(s=h[a][n])||-1===s.index||!s.visible||0===s.alpha)continue;i.push(s)}return o.tilesDrawn=i.length,o.tilesTotal=d*u,i}},19462:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n){i||(i=new r);var a=n.baseTileWidth,s=n.baseTileHeight,o=n.tilemapLayer,h=0,d=0;o&&(l||(l=o.scene.cameras.main),h=o.x+l.scrollX*(1-o.scrollFactorX),a*=o.scaleX,d=o.y+l.scrollY*(1-o.scrollFactorY),s*=o.scaleY);var u=h+a/2*(e-t),c=d+(e+t)*(s/2);return i.set(u,c)}},25901:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n,a){l||(l=new r);var s=a.baseTileWidth,o=a.baseTileHeight,h=a.tilemapLayer;h&&(n||(n=h.scene.cameras.main),t-=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY,e-=h.x+n.scrollX*(1-h.scrollFactorX),s*=h.scaleX);var d=i?Math.floor((e/(s/2)+t/(o/2))/2):(e/(s/2)+t/(o/2))/2,u=i?Math.floor((t/(o/2)-e/(s/2))/2):(t/(o/2)-e/(s/2))/2;return l.set(d,u)}},9749:(e,t,i)=>{var r=i(3825),l=i(48339),n=i(500),a=i(35031),s=i(7606);e.exports=function(e,t,i,o,h){if(void 0===o&&(o=!0),!l(t,i,h))return null;var d=h.data[i][t],u=d&&d.collides;if(e instanceof r)null===h.data[i][t]&&(h.data[i][t]=new r(h,e.index,t,i,h.tileWidth,h.tileHeight)),h.data[i][t].copy(e);else{var c=e;null===h.data[i][t]?h.data[i][t]=new r(h,c,t,i,h.tileWidth,h.tileHeight):h.data[i][t].index=c}var f=h.data[i][t],g=-1!==h.collideIndexes.indexOf(f.index),p=s(h.tilemapLayer.tilemap)[c=e instanceof r?e.index:e][2],y=h.tilemapLayer.tileset[p];return f.width=y.tileWidth,f.height=y.tileHeight,a(f,g),o&&u!==f.collides&&n(t,i,h),f}},10543:(e,t,i)=>{var r=i(9749),l=new(i(17321));e.exports=function(e,t,i,n,a,s){return s.tilemapLayer.worldToTileXY(t,i,!0,l,a,s),r(e,l.x,l.y,n,s)}},47663:(e,t,i)=>{var r=i(22122),l=i(9749);e.exports=function(e,t,i,n,a){if(void 0===n&&(n=!0),!Array.isArray(e))return null;Array.isArray(e[0])||(e=[e]);for(var s=e.length,o=e[0].length,h=0;h<s;h++)for(var d=0;d<o;d++){var u=e[h][d];l(u,t+d,i+h,!1,a)}n&&r(t-1,i-1,o+2,s+2,a)}},18396:(e,t,i)=>{var r=i(98767),l=i(88829);e.exports=function(e,t,i,n,a,s){var o,h=r(e,t,i,n,{},s);if(!a)for(a=[],o=0;o<h.length;o++)-1===a.indexOf(h[o].index)&&a.push(h[o].index);for(o=0;o<h.length;o++)h[o].index=l(a)}},73019:(e,t,i)=>{var r=i(3825),l=i(48339),n=i(500);e.exports=function(e,t,i,a,s){if(void 0===i&&(i=!0),void 0===a&&(a=!0),!l(e,t,s))return null;var o=s.data[t][e];return o?(s.data[t][e]=i?null:new r(s,-1,e,t,s.tileWidth,s.tileHeight),a&&o&&o.collides&&n(e,t,s),o):null}},47216:(e,t,i)=>{var r=i(73019),l=new(i(17321));e.exports=function(e,t,i,n,a,s){return s.tilemapLayer.worldToTileXY(e,t,!0,l,a,s),r(l.x,l.y,i,n,s)}},59787:(e,t,i)=>{var r=i(98767),l=i(80586),n=new l(105,210,231,150),a=new l(243,134,48,200),s=new l(40,39,37,150);e.exports=function(e,t,i){void 0===t&&(t={});var l=void 0!==t.tileColor?t.tileColor:n,o=void 0!==t.collidingTileColor?t.collidingTileColor:a,h=void 0!==t.faceColor?t.faceColor:s,d=r(0,0,i.width,i.height,null,i);e.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),e.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var u=0;u<d.length;u++){var c=d[u],f=c.width,g=c.height,p=c.pixelX,y=c.pixelY,v=c.collides?o:l;null!==v&&(e.fillStyle(v.color,v.alpha/255),e.fillRect(p,y,f,g)),p+=1,y+=1,f-=2,g-=2,null!==h&&(e.lineStyle(1,h.color,h.alpha/255),c.faceTop&&e.lineBetween(p,y,p+f,y),c.faceRight&&e.lineBetween(p+f,y,p+f,y+g),c.faceBottom&&e.lineBetween(p,y+g,p+f,y+g),c.faceLeft&&e.lineBetween(p,y,p,y+g))}}},44641:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,a,s){for(var o=r(i,l,n,a,null,s),h=0;h<o.length;h++)o[h]&&o[h].index===e&&(o[h].index=t)}},55645:e=>{e.exports=function(e,t,i,r){var l,n,a,s=e.data,o=e.width,h=e.height,d=e.tilemapLayer,u=Math.max(0,t.left),c=Math.min(o,t.right),f=Math.max(0,t.top),g=Math.min(h,t.bottom);if(0===i)for(n=f;n<g;n++)for(l=u;s[n]&&l<c;l++)(a=s[n][l])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(1===i)for(n=f;n<g;n++)for(l=c;s[n]&&l>=u;l--)(a=s[n][l])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(2===i)for(n=g;n>=f;n--)for(l=u;s[n]&&l<c;l++)(a=s[n][l])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);else if(3===i)for(n=g;n>=f;n--)for(l=c;s[n]&&l>=u;l--)(a=s[n][l])&&-1!==a.index&&a.visible&&0!==a.alpha&&r.push(a);return d.tilesDrawn=r.length,d.tilesTotal=o*h,r}},62299:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(32474);e.exports=function(e,t,i,a,s){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===s&&(s=!0),Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++)n(e[o],t,a);if(s)for(var h=0;h<a.height;h++)for(var d=0;d<a.width;d++){var u=a.data[h][d];u&&-1!==e.indexOf(u.index)&&r(u,t)}i&&l(0,0,a.width,a.height,a)}},7630:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(32474);e.exports=function(e,t,i,a,s,o){if(void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===o&&(o=!0),!(e>t)){for(var h=e;h<=t;h++)n(h,i,s);if(o)for(var d=0;d<s.height;d++)for(var u=0;u<s.width;u++){var c=s.data[d][u];c&&c.index>=e&&c.index<=t&&r(c,i)}a&&l(0,0,s.width,s.height,s)}}},10072:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(32474);e.exports=function(e,t,i,a){void 0===t&&(t=!0),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);for(var s=0;s<a.height;s++)for(var o=0;o<a.width;o++){var h=a.data[s][o];h&&-1===e.indexOf(h.index)&&(r(h,t),n(h.index,t,a))}i&&l(0,0,a.width,a.height,a)}},14966:(e,t,i)=>{var r=i(35031),l=i(22122),n=i(60419);e.exports=function(e,t,i,a){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var s=0;s<a.height;s++)for(var o=0;o<a.width;o++){var h=a.data[s][o];if(h)for(var d in e)if(n(h.properties,d)){var u=e[d];Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++)h.properties[d]===u[c]&&r(h,t)}}i&&l(0,0,a.width,a.height,a)}},36774:(e,t,i)=>{var r=i(35031),l=i(22122);e.exports=function(e,t,i){void 0===e&&(e=!0),void 0===t&&(t=!0);for(var n=0;n<i.height;n++)for(var a=0;a<i.width;a++){var s=i.data[n][a];if(s){var o=s.getCollisionGroup();o&&o.objects&&o.objects.length>0&&r(s,e)}}t&&l(0,0,i.width,i.height,i)}},32474:e=>{e.exports=function(e,t,i){var r=i.collideIndexes.indexOf(e);t&&-1===r?i.collideIndexes.push(e):t||-1===r||i.collideIndexes.splice(r,1)}},35031:e=>{e.exports=function(e,t){t?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)}},69902:e=>{e.exports=function(e,t,i,r){if("number"==typeof e)r.callbacks[e]=null!==t?{callback:t,callbackContext:i}:void 0;else for(var l=0,n=e.length;l<n;l++)r.callbacks[e[l]]=null!==t?{callback:t,callbackContext:i}:void 0}},17335:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,a,s){for(var o=r(e,t,i,l,null,s),h=0;h<o.length;h++)o[h].setCollisionCallback(n,a)}},70734:(e,t,i)=>{var r=i(98767),l=i(80675);e.exports=function(e,t,i,n,a){var s=r(e,t,i,n,null,a),o=s.map((function(e){return e.index}));l(o);for(var h=0;h<s.length;h++)s[h].index=o[h]}},31933:(e,t,i)=>{var r=i(12174),l=i(99e3);e.exports=function(e,t){var i=e.tilemapLayer.tilemap,n=e.tilemapLayer,a=Math.floor(i.tileWidth*n.scaleX),s=Math.floor(i.tileHeight*n.scaleY);return{left:l(t.worldView.x-n.x,a,0,!0)-n.cullPaddingX,right:r(t.worldView.right-n.x,a,0,!0)+n.cullPaddingX,top:l(t.worldView.y-n.y,s/2,0,!0)-n.cullPaddingY,bottom:r(t.worldView.bottom-n.y,s/2,0,!0)+n.cullPaddingY}}},46341:(e,t,i)=>{var r=i(31933),l=i(55645);e.exports=function(e,t,i,n){void 0===i&&(i=[]),void 0===n&&(n=0),i.length=0;var a=e.tilemapLayer;if(!a.skipCull&&1===a.scrollFactorX&&1===a.scrollFactorY){var s=r(e,t);l(e,s,n,i)}return i}},16407:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n){i||(i=new r);var a=n.baseTileWidth,s=n.baseTileHeight,o=n.tilemapLayer,h=0,d=0;o&&(l||(l=o.scene.cameras.main),h=o.x+l.scrollX*(1-o.scrollFactorX),a*=o.scaleX,d=o.y+l.scrollY*(1-o.scrollFactorY),s*=o.scaleY);var u=h+e*a+t%2*(a/2),c=d+t*(s/2);return i.set(u,c)}},89485:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,l=i.tilemapLayer,n=0;return l&&(void 0===t&&(t=l.scene.cameras.main),n=l.y+t.scrollY*(1-l.scrollFactorY),r*=l.scaleY),n+e*(r/2)+r}},89098:(e,t,i)=>{var r=i(17321);e.exports=function(e,t,i,l,n,a){l||(l=new r);var s=a.baseTileWidth,o=a.baseTileHeight,h=a.tilemapLayer;h&&(n||(n=h.scene.cameras.main),t-=h.y+n.scrollY*(1-h.scrollFactorY),o*=h.scaleY,e-=h.x+n.scrollX*(1-h.scrollFactorX),s*=h.scaleX);var d=i?Math.floor(t/(o/2)):t/(o/2),u=i?Math.floor((e+d%2*.5*s)/s):(e+d%2*.5*s)/s;return l.set(u,d)}},95608:e=>{e.exports=function(e,t,i,r){var l=r.baseTileHeight,n=r.tilemapLayer;return n&&(i||(i=n.scene.cameras.main),e-=n.y+i.scrollY*(1-n.scrollFactorY),l*=n.scaleY),t?Math.floor(e/(l/2)):e/(l/2)}},86349:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,a,s){for(var o=r(i,l,n,a,null,s),h=0;h<o.length;h++)o[h]&&(o[h].index===e?o[h].index=t:o[h].index===t&&(o[h].index=e))}},80391:e=>{e.exports=function(e,t,i){var r=i.baseTileWidth,l=i.tilemapLayer,n=0;return l&&(t||(t=l.scene.cameras.main),n=l.x+t.scrollX*(1-l.scrollFactorX),r*=l.scaleX),n+e*r}},29938:(e,t,i)=>{var r=i(80391),l=i(56775),n=i(17321);e.exports=function(e,t,i,a,s){return i||(i=new n(0,0)),i.x=r(e,a,s),i.y=l(t,a,s),i}},56775:e=>{e.exports=function(e,t,i){var r=i.baseTileHeight,l=i.tilemapLayer,n=0;return l&&(t||(t=l.scene.cameras.main),n=l.y+t.scrollY*(1-l.scrollFactorY),r*=l.scaleY),n+e*r}},94999:(e,t,i)=>{var r=i(98767);e.exports=function(e,t,i,l,n,a){if(n){var s,o=r(e,t,i,l,null,a),h=0;for(s=0;s<n.length;s++)h+=n[s].weight;if(!(h<=0))for(s=0;s<o.length;s++){for(var d=Math.random()*h,u=0,c=-1,f=0;f<n.length;f++)if(d<=(u+=n[f].weight)){var g=n[f].index;c=Array.isArray(g)?g[Math.floor(Math.random()*g.length)]:g;break}o[s].index=c}}}},78899:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=!0);var l=r.baseTileWidth,n=r.tilemapLayer;return n&&(i||(i=n.scene.cameras.main),e-=n.x+i.scrollX*(1-n.scrollFactorX),l*=n.scaleX),t?Math.floor(e/l):e/l}},99916:(e,t,i)=>{var r=i(78899),l=i(87472),n=i(17321);e.exports=function(e,t,i,a,s,o){return void 0===i&&(i=!0),a||(a=new n(0,0)),a.x=r(e,i,s,o),a.y=l(t,i,s,o),a}},87472:e=>{e.exports=function(e,t,i,r){void 0===t&&(t=!0);var l=r.baseTileHeight,n=r.tilemapLayer;return n&&(i||(i=n.scene.cameras.main),e-=n.y+i.scrollY*(1-n.scrollFactorY),l*=n.scaleY),t?Math.floor(e/l):e/l}},32257:(e,t,i)=>{e.exports={CalculateFacesAt:i(500),CalculateFacesWithin:i(22122),CheckIsoBounds:i(32615),Copy:i(35432),CreateFromTiles:i(94916),CullBounds:i(65234),CullTiles:i(65479),Fill:i(22619),FilterTiles:i(34254),FindByIndex:i(71198),FindTile:i(87555),ForEachTile:i(30127),GetCullTilesFunction:i(69447),GetTileAt:i(15921),GetTileAtWorldXY:i(16304),GetTilesWithin:i(98767),GetTilesWithinShape:i(13091),GetTilesWithinWorldXY:i(79247),GetTileToWorldXFunction:i(10858),GetTileToWorldXYFunction:i(59363),GetTileToWorldYFunction:i(83277),GetWorldToTileXFunction:i(54343),GetWorldToTileXYFunction:i(53813),GetWorldToTileYFunction:i(30833),HasTileAt:i(5253),HasTileAtWorldXY:i(72502),HexagonalCullBounds:i(96921),HexagonalCullTiles:i(5802),HexagonalTileToWorldXY:i(56645),HexagonalTileToWorldY:i(96542),HexagonalWorldToTileXY:i(1917),HexagonalWorldToTileY:i(89055),IsInLayerBounds:i(48339),IsometricCullTiles:i(14879),IsometricTileToWorldXY:i(19462),IsometricWorldToTileXY:i(25901),PutTileAt:i(9749),PutTileAtWorldXY:i(10543),PutTilesAt:i(47663),Randomize:i(18396),RemoveTileAt:i(73019),RemoveTileAtWorldXY:i(47216),RenderDebug:i(59787),ReplaceByIndex:i(44641),RunCull:i(55645),SetCollision:i(62299),SetCollisionBetween:i(7630),SetCollisionByExclusion:i(10072),SetCollisionByProperty:i(14966),SetCollisionFromCollisionGroup:i(36774),SetLayerCollisionIndex:i(32474),SetTileCollision:i(35031),SetTileIndexCallback:i(69902),SetTileLocationCallback:i(17335),Shuffle:i(70734),StaggeredCullBounds:i(31933),StaggeredCullTiles:i(46341),StaggeredTileToWorldXY:i(16407),StaggeredTileToWorldY:i(89485),StaggeredWorldToTileXY:i(89098),StaggeredWorldToTileY:i(95608),SwapByIndex:i(86349),TileToWorldX:i(80391),TileToWorldXY:i(29938),TileToWorldY:i(56775),WeightedRandomize:i(94999),WorldToTileX:i(78899),WorldToTileXY:i(99916),WorldToTileY:i(87472)}},14011:e=>{e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},74774:(e,t,i)=>{var r={ORIENTATION:i(14011)};e.exports=r},72400:(e,t,i)=>{var r=i(72646),l=i(74774),n={Components:i(32257),Parsers:i(27344),Formats:i(53012),ImageCollection:i(73476),ParseToTilemap:i(5078),Tile:i(3825),Tilemap:i(77960),TilemapCreator:i(11328),TilemapFactory:i(81004),Tileset:i(47270),TilemapLayer:i(77686),Orientation:i(14011),LayerData:i(20814),MapData:i(6691),ObjectLayer:i(31894)};n=r(!1,n,l.ORIENTATION),e.exports=n},20814:(e,t,i)=>{var r=i(69186),l=i(14011),n=i(25738),a=new r({initialize:function(e){void 0===e&&(e={}),this.name=n(e,"name","layer"),this.x=n(e,"x",0),this.y=n(e,"y",0),this.width=n(e,"width",0),this.height=n(e,"height",0),this.tileWidth=n(e,"tileWidth",0),this.tileHeight=n(e,"tileHeight",0),this.baseTileWidth=n(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=n(e,"baseTileHeight",this.tileHeight),this.orientation=n(e,"orientation",l.ORTHOGONAL),this.widthInPixels=n(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=n(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=n(e,"alpha",1),this.visible=n(e,"visible",!0),this.properties=n(e,"properties",[]),this.indexes=n(e,"indexes",[]),this.collideIndexes=n(e,"collideIndexes",[]),this.callbacks=n(e,"callbacks",[]),this.bodies=n(e,"bodies",[]),this.data=n(e,"data",[]),this.tilemapLayer=n(e,"tilemapLayer",null),this.hexSideLength=n(e,"hexSideLength",0)}});e.exports=a},6691:(e,t,i)=>{var r=i(69186),l=i(14011),n=i(25738),a=new r({initialize:function(e){void 0===e&&(e={}),this.name=n(e,"name","map"),this.width=n(e,"width",0),this.height=n(e,"height",0),this.infinite=n(e,"infinite",!1),this.tileWidth=n(e,"tileWidth",0),this.tileHeight=n(e,"tileHeight",0),this.widthInPixels=n(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=n(e,"heightInPixels",this.height*this.tileHeight),this.format=n(e,"format",null),this.orientation=n(e,"orientation",l.ORTHOGONAL),this.renderOrder=n(e,"renderOrder","right-down"),this.version=n(e,"version","1"),this.properties=n(e,"properties",{}),this.layers=n(e,"layers",[]),this.images=n(e,"images",[]),this.objects=n(e,"objects",[]),this.collision=n(e,"collision",{}),this.tilesets=n(e,"tilesets",[]),this.imageCollections=n(e,"imageCollections",[]),this.tiles=n(e,"tiles",[]),this.hexSideLength=n(e,"hexSideLength",0)}});e.exports=a},31894:(e,t,i)=>{var r=i(69186),l=i(25738),n=new r({initialize:function(e){void 0===e&&(e={}),this.name=l(e,"name","object layer"),this.opacity=l(e,"opacity",1),this.properties=l(e,"properties",{}),this.propertyTypes=l(e,"propertytypes",{}),this.type=l(e,"type","objectgroup"),this.visible=l(e,"visible",!0),this.objects=l(e,"objects",[])}});e.exports=n},2002:(e,t,i)=>{var r=i(14011);e.exports=function(e){return"isometric"===(e=e.toLowerCase())?r.ISOMETRIC:"staggered"===e?r.STAGGERED:"hexagonal"===e?r.HEXAGONAL:r.ORTHOGONAL}},37441:(e,t,i)=>{var r=i(53012),l=i(38018),n=i(17498),a=i(91073),s=i(38309);e.exports=function(e,t,i,o,h,d){var u;switch(t){case r.ARRAY_2D:u=l(e,i,o,h,d);break;case r.CSV:u=n(e,i,o,h,d);break;case r.TILED_JSON:u=a(e,i,d);break;case r.WELTMEISTER:u=s(e,i,d);break;default:console.warn("Unrecognized tilemap data format: "+t),u=null}return u}},38018:(e,t,i)=>{var r=i(53012),l=i(20814),n=i(6691),a=i(3825);e.exports=function(e,t,i,s,o){for(var h=new l({tileWidth:i,tileHeight:s}),d=new n({name:e,tileWidth:i,tileHeight:s,format:r.ARRAY_2D,layers:[h]}),u=[],c=t.length,f=0,g=0;g<t.length;g++){u[g]=[];for(var p=t[g],y=0;y<p.length;y++){var v=parseInt(p[y],10);isNaN(v)||-1===v?u[g][y]=o?null:new a(h,-1,y,g,i,s):u[g][y]=new a(h,v,y,g,i,s)}0===f&&(f=p.length)}return d.width=h.width=f,d.height=h.height=c,d.widthInPixels=h.widthInPixels=f*i,d.heightInPixels=h.heightInPixels=c*s,h.data=u,d}},17498:(e,t,i)=>{var r=i(53012),l=i(38018);e.exports=function(e,t,i,n,a){var s=t.trim().split("\n").map((function(e){return e.split(",")})),o=l(e,s,i,n,a);return o.format=r.CSV,o}},10897:(e,t,i)=>{var r=i(20814),l=i(3825);e.exports=function(e,t){for(var i=[],n=0;n<e.layer.length;n++){for(var a=e.layer[n],s=new r({name:a.name,width:a.width,height:a.height,tileWidth:a.tilesize,tileHeight:a.tilesize,visible:1===a.visible}),o=[],h=[],d=0;d<a.data.length;d++){for(var u=0;u<a.data[d].length;u++){var c,f=a.data[d][u]-1;c=f>-1?new l(s,f,u,d,a.tilesize,a.tilesize):t?null:new l(s,-1,u,d,a.tilesize,a.tilesize),o.push(c)}h.push(o),o=[]}s.data=h,i.push(s)}return i}},72093:(e,t,i)=>{var r=i(47270);e.exports=function(e){for(var t=[],i=[],l=0;l<e.layer.length;l++){var n=e.layer[l],a=n.tilesetName;""!==a&&-1===i.indexOf(a)&&(i.push(a),t.push(new r(a,0,n.tilesize,n.tilesize,0,0)))}return t}},38309:(e,t,i)=>{var r=i(53012),l=i(6691),n=i(10897),a=i(72093);e.exports=function(e,t,i){if(0===t.layer.length)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var s=0,o=0,h=0;h<t.layer.length;h++)t.layer[h].width>s&&(s=t.layer[h].width),t.layer[h].height>o&&(o=t.layer[h].height);var d=new l({width:s,height:o,name:e,tileWidth:t.layer[0].tilesize,tileHeight:t.layer[0].tilesize,format:r.WELTMEISTER});return d.layers=n(t,i),d.tilesets=a(t),d}},89986:(e,t,i)=>{e.exports={ParseTileLayers:i(10897),ParseTilesets:i(72093),ParseWeltmeister:i(38309)}},27344:(e,t,i)=>{e.exports={FromOrientationString:i(2002),Parse:i(37441),Parse2DArray:i(38018),ParseCSV:i(17498),Impact:i(89986),Tiled:i(5709)}},42008:(e,t,i)=>{var r=i(72646);e.exports=function(e){for(var t,i,l,n,a,s=0;s<e.layers.length;s++){t=e.layers[s],n=null;for(var o=0;o<t.data.length;o++){a=t.data[o];for(var h=0;h<a.length;h++)null===(i=a[h])||i.index<0||(l=e.tiles[i.index][2],n=e.tilesets[l],i.width=n.tileWidth,i.height=n.tileHeight,n.tileProperties&&n.tileProperties[i.index-n.firstgid]&&(i.properties=r(i.properties,n.tileProperties[i.index-n.firstgid])))}}}},22645:e=>{e.exports=function(e){for(var t=window.atob(e),i=t.length,r=new Array(i/4),l=0;l<i;l+=4)r[l/4]=(t.charCodeAt(l)|t.charCodeAt(l+1)<<8|t.charCodeAt(l+2)<<16|t.charCodeAt(l+3)<<24)>>>0;return r}},7606:(e,t,i)=>{var r=i(47270);e.exports=function(e){var t,i,l=[];for(t=0;t<e.imageCollections.length;t++)for(var n=e.imageCollections[t],a=n.images,s=0;s<a.length;s++){var o=a[s];(i=new r(o.image,o.gid,n.imageWidth,n.imageHeight,0,0)).updateTileData(n.imageWidth,n.imageHeight),e.tilesets.push(i)}for(t=0;t<e.tilesets.length;t++)for(var h=(i=e.tilesets[t]).tileMargin,d=i.tileMargin,u=0,c=0,f=0,g=i.firstgid;g<i.firstgid+i.total&&(l[g]=[h,d,t],h+=i.tileWidth+i.tileSpacing,++u!==i.total)&&(++c!==i.columns||(h=i.tileMargin,d+=i.tileHeight+i.tileSpacing,c=0,++f!==i.rows));g++);return l}},37531:(e,t,i)=>{var r=i(25738);e.exports=function(e,t,i){if(!t)return{i:0,layers:e.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=t.x+r(t,"startx",0)*e.tilewidth+r(t,"offsetx",0),n=t.y+r(t,"starty",0)*e.tileheight+r(t,"offsety",0);return{i:0,layers:t.layers,name:i.name+t.name+"/",opacity:i.opacity*t.opacity,visible:i.visible&&t.visible,x:i.x+l,y:i.y+n}}},71551:e=>{e.exports=function(e){var t=Boolean(2147483648&e),i=Boolean(1073741824&e),r=Boolean(536870912&e);e&=536870911;var l=0,n=!1;return t&&i&&r?(l=Math.PI/2,n=!0):t&&i&&!r?(l=Math.PI,n=!1):t&&!i&&r?(l=Math.PI/2,n=!1):!t||i||r?!t&&i&&r?(l=3*Math.PI/2,n=!1):t||!i||r?t||i||!r?t||i||r||(l=0,n=!1):(l=3*Math.PI/2,n=!0):(l=Math.PI,n=!0):(l=0,n=!0),{gid:e,flippedHorizontal:t,flippedVertical:i,flippedAntiDiagonal:r,rotation:l,flipped:n}}},21895:(e,t,i)=>{var r=i(25738),l=i(37531);e.exports=function(e){for(var t=[],i=[],n=l(e);n.i<n.layers.length||i.length>0;)if(n.i>=n.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=i.pop()}else{var a=n.layers[n.i];if(n.i++,"imagelayer"===a.type){var s=r(a,"offsetx",0)+r(a,"startx",0),o=r(a,"offsety",0)+r(a,"starty",0);t.push({name:n.name+a.name,image:a.image,x:n.x+s+a.x,y:n.y+o+a.y,alpha:n.opacity*a.opacity,visible:n.visible&&a.visible,properties:r(a,"properties",{})})}else if("group"===a.type){var h=l(e,a,n);i.push(n),n=h}}return t}},91073:(e,t,i)=>{var r=i(42008),l=i(7606),n=i(14011),a=i(53012),s=i(2002),o=i(6691),h=i(21895),d=i(2556),u=i(41789),c=i(30460);e.exports=function(e,t,i){var f=new o({width:t.width,height:t.height,name:e,tileWidth:t.tilewidth,tileHeight:t.tileheight,orientation:s(t.orientation),format:a.TILED_JSON,version:t.version,properties:t.properties,renderOrder:t.renderorder,infinite:t.infinite});f.orientation===n.HEXAGONAL&&(f.hexSideLength=t.hexsidelength),f.layers=u(t,i),f.images=h(t);var g=c(t);return f.tilesets=g.tilesets,f.imageCollections=g.imageCollections,f.objects=d(t),f.tiles=l(f),r(f),f}},73327:(e,t,i)=>{var r=i(59210),l=i(71551),n=function(e){return{x:e.x,y:e.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"];e.exports=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var s=r(e,a);if(s.x+=t,s.y+=i,e.gid){var o=l(e.gid);s.gid=o.gid,s.flippedHorizontal=o.flippedHorizontal,s.flippedVertical=o.flippedVertical,s.flippedAntiDiagonal=o.flippedAntiDiagonal}else e.polyline?s.polyline=e.polyline.map(n):e.polygon?s.polygon=e.polygon.map(n):e.ellipse?s.ellipse=e.ellipse:e.text?s.text=e.text:e.point?s.point=!0:s.rectangle=!0;return s}},2556:(e,t,i)=>{var r=i(25738),l=i(73327),n=i(31894),a=i(37531);e.exports=function(e){for(var t=[],i=[],s=a(e);s.i<s.layers.length||i.length>0;)if(s.i>=s.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop()}else{var o=s.layers[s.i];if(s.i++,o.opacity*=s.opacity,o.visible=s.visible&&o.visible,"objectgroup"===o.type){o.name=s.name+o.name;for(var h=s.x+r(o,"startx",0)+r(o,"offsetx",0),d=s.y+r(o,"starty",0)+r(o,"offsety",0),u=[],c=0;c<o.objects.length;c++){var f=l(o.objects[c],h,d);u.push(f)}var g=new n(o);g.objects=u,t.push(g)}else if("group"===o.type){var p=a(e,o,s);i.push(s),s=p}}return t}},41789:(e,t,i)=>{var r=i(22645),l=i(14011),n=i(37531),a=i(2002),s=i(25738),o=i(20814),h=i(71551),d=i(3825);e.exports=function(e,t){for(var i=s(e,"infinite",!1),u=[],c=[],f=n(e);f.i<f.layers.length||c.length>0;)if(f.i>=f.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=c.pop()}else{var g=f.layers[f.i];if(f.i++,"tilelayer"===g.type)if(g.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+g.name+"'");else{if(g.encoding&&"base64"===g.encoding){if(g.chunks)for(var p=0;p<g.chunks.length;p++)g.chunks[p].data=r(g.chunks[p].data);g.data&&(g.data=r(g.data)),delete g.encoding}var y,v,x,m,T=[],w=0;if(i){var L=s(g,"startx",0)+g.x,b=s(g,"starty",0)+g.y;(y=new o({name:f.name+g.name,x:f.x+s(g,"offsetx",0)+L*e.tilewidth,y:f.y+s(g,"offsety",0)+b*e.tileheight,width:g.width,height:g.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*g.opacity,visible:f.visible&&g.visible,properties:s(g,"properties",[]),orientation:a(e.orientation)})).orientation===l.HEXAGONAL&&(y.hexSideLength=e.hexsidelength);for(var W=0;W<g.height;W++){T[W]=[null];for(var A=0;A<g.width;A++)T[W][A]=null}for(W=0,G=g.chunks.length;W<G;W++)for(var Y=g.chunks[W],C=Y.x-L,I=Y.y-b,X=0,O=0,S=Y.data.length;O<S;O++){var H=w+C,F=X+I;(v=h(Y.data[O])).gid>0?((x=new d(y,v.gid,H,F,e.tilewidth,e.tileheight)).rotation=v.rotation,x.flipX=v.flipped,T[F][H]=x):(m=t?null:new d(y,-1,H,F,e.tilewidth,e.tileheight),T[F][H]=m),++w===Y.width&&(X++,w=0)}}else{(y=new o({name:f.name+g.name,x:f.x+s(g,"offsetx",0)+g.x,y:f.y+s(g,"offsety",0)+g.y,width:g.width,height:g.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:f.opacity*g.opacity,visible:f.visible&&g.visible,properties:s(g,"properties",[]),orientation:a(e.orientation)})).orientation===l.HEXAGONAL&&(y.hexSideLength=e.hexsidelength);for(var P=[],R=0,G=g.data.length;R<G;R++)(v=h(g.data[R])).gid>0?((x=new d(y,v.gid,w,T.length,e.tilewidth,e.tileheight)).rotation=v.rotation,x.flipX=v.flipped,P.push(x)):(m=t?null:new d(y,-1,w,T.length,e.tilewidth,e.tileheight),P.push(m)),++w===g.width&&(T.push(P),w=0,P=[])}y.data=T,u.push(y)}else if("group"===g.type){var k=n(e,g,f);c.push(f),f=k}}return u}},30460:(e,t,i)=>{var r=i(47270),l=i(73476),n=i(73327),a=i(52179);e.exports=function(e){for(var t,i=[],s=[],o=null,h=0;h<e.tilesets.length;h++){var d=e.tilesets[h];if(d.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(d.image){var u=new r(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,void 0,void 0,d.tileoffset);if(e.version>1){var c=void 0,f=void 0;if(Array.isArray(d.tiles)){c=c||{},f=f||{};for(var g=0;g<d.tiles.length;g++){var p=d.tiles[g];if(p.properties){var y={};p.properties.forEach((function(e){y[e.name]=e.value})),f[p.id]=y}if(p.objectgroup&&((c[p.id]||(c[p.id]={})).objectgroup=p.objectgroup,p.objectgroup.objects)){var v=p.objectgroup.objects.map((function(e){return n(e)}));c[p.id].objectgroup.objects=v}p.animation&&((c[p.id]||(c[p.id]={})).animation=p.animation),p.type&&((c[p.id]||(c[p.id]={})).type=p.type)}}Array.isArray(d.wangsets)&&(c=c||{},f=f||{},a(d.wangsets,c)),c&&(u.tileData=c,u.tileProperties=f)}else if(d.tileproperties&&(u.tileProperties=d.tileproperties),d.tiles)for(t in u.tileData=d.tiles,u.tileData){var x=u.tileData[t].objectgroup;if(x&&x.objects){var m=x.objects.map((function(e){return n(e)}));u.tileData[t].objectgroup.objects=m}}u.updateTileData(d.imagewidth,d.imageheight),i.push(u)}else{var T=new l(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,d.properties),w=0;for(g=0;g<d.tiles.length;g++){var L=(p=d.tiles[g]).image,b=parseInt(p.id,10),W=d.firstgid+b;T.addImage(W,L),w=Math.max(b,w)}T.maxId=w,s.push(T)}o&&(o.lastgid=d.firstgid-1),o=d}return{tilesets:i,imageCollections:s}}},52179:e=>{e.exports=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],l=i;if(r.name&&""!==r.name&&(l=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var n,a,s,o={},h={};if(Array.isArray(r.edgecolors))for(n=0;n<r.edgecolors.length;n++)s=1+n,""!==(a=r.edgecolors[n]).name&&(o[s]=a.name);if(Array.isArray(r.cornercolors))for(n=0;n<r.cornercolors.length;n++)s=1+n,""!==(a=r.cornercolors[n]).name&&(h[s]=a.name);if(Array.isArray(r.colors))for(n=0;n<r.colors.length;n++)s=1+n,""!==(a=r.colors[n]).name&&(o[s]=h[s]=a.name);for(var d=[o,h,o,h,o,h,o,h],u=0;u<r.wangtiles.length;u++){var c=r.wangtiles[u],f=t[c.tileid]||(t[c.tileid]={});f=f.wangid||(f.wangid={});for(var g=[],p=0;p<Math.min(d.length,c.wangid.length);p++)if(0!==(a=c.wangid[p])){var y=d[p][a];void 0===y?g.push(a):g.push(y)}else g.push(void 0);f[l]=g}}}}},5709:(e,t,i)=>{e.exports={AssignTileProperties:i(42008),Base64Decode:i(22645),BuildTilesetIndex:i(7606),CreateGroupLayer:i(37531),ParseGID:i(71551),ParseImageLayers:i(21895),ParseJSONTiled:i(91073),ParseObject:i(73327),ParseObjectLayers:i(2556),ParseTileLayers:i(41789),ParseTilesets:i(30460)}}}]);